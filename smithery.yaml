# Smithery configuration file: https://smithery.ai/docs/config#smitheryyaml

startCommand:
  type: stdio
  configSchema:
    type: object
    required:
      - perplexityApiKey
    properties:
      perplexityApiKey:
        type: string
        description: The API key for the Perplexity API.
      perplexityModel:
        type: string
        description: "Optional: The model for the Perplexity API."
        default: sonar-pro
      modelAsk:
        type: string
        description: "Optional: Override model for ask_perplexity tool"
      modelChat:
        type: string
        description: "Optional: Override model for chat_perplexity tool"
      dbPath:
        type: string
        description: "Optional: Custom path for SQLite chat history database"
      webUiEnabled:
        type: boolean
        description: "Optional: Enable web UI (required for Smithery scanning)"
        default: true
      webUiPort:
        type: integer
        description: "Optional: Web UI port"
        default: 8050
      webUiHost:
        type: string
        description: "Optional: Web UI host"
        default: "0.0.0.0"
  
  # Standard command configuration
  command: "python"
  args: ["-u", "-m", "mcp_perplexity.server"]
  env:
    PERPLEXITY_API_KEY: "{{perplexityApiKey}}"
    DEBUG_LOGS: "true"
    PERPLEXITY_MODEL: "{{perplexityModel}}"
    PERPLEXITY_MODEL_ASK: "{{modelAsk}}"
    PERPLEXITY_MODEL_CHAT: "{{modelChat}}"
    DB_PATH: "{{dbPath}}"
    WEB_UI_ENABLED: "{{webUiEnabled}}"
    WEB_UI_PORT: "{{webUiPort}}"
    WEB_UI_HOST: "{{webUiHost}}"

build:
  dockerfile: Dockerfile
  dockerBuildPath: .
